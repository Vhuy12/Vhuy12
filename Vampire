local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Ball = workspace:WaitForChild("Ball")

local parryRemote = ReplicatedStorage:WaitForChild("Remotes"):FindFirstChild("ParryAttempt")
local skillRemote = ReplicatedStorage:WaitForChild("Remotes"):FindFirstChild("ActivateSkill")

local AutoParry = false
local AutoSkill = false
local reactionTime = 0.01
local skillSpamInterval = 0.01

-- GUI
local gui = Instance.new("ScreenGui", game.CoreGui)
local frame = Instance.new("Frame", gui)
frame.Position = UDim2.new(0, 20, 0, 100)
frame.Size = UDim2.new(0, 160, 0, 70)
frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)

local parryBtn = Instance.new("TextButton", frame)
parryBtn.Size = UDim2.new(1, 0, 0, 30)
parryBtn.Position = UDim2.new(0, 0, 0, 0)
parryBtn.Text = "Auto Parry: OFF"
parryBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
parryBtn.TextColor3 = Color3.new(1,1,1)

local skillBtn = Instance.new("TextButton", frame)
skillBtn.Size = UDim2.new(1, 0, 0, 30)
skillBtn.Position = UDim2.new(0, 0, 0, 35)
skillBtn.Text = "Auto Skill: OFF"
skillBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
skillBtn.TextColor3 = Color3.new(1,1,1)

parryBtn.MouseButton1Click:Connect(function()
    AutoParry = not AutoParry
    parryBtn.Text = "Auto Parry: " .. (AutoParry and "ON" or "OFF")
end)

skillBtn.MouseButton1Click:Connect(function()
    AutoSkill = not AutoSkill
    skillBtn.Text = "Auto Skill: " .. (AutoSkill and "ON" or "OFF")
    if AutoSkill then
        task.spawn(function()
            while AutoSkill do
                skillRemote:FireServer()
                task.wait(skillSpamInterval)
            end
        end)
    end
end)

-- Parry
RunService.RenderStepped:Connect(function()
    if AutoParry and Ball and HumanoidRootPart then
        local distance = (Ball.Position - HumanoidRootPart.Position).Magnitude
        local velocity = Ball.Velocity.Magnitude
        if distance < 20 and velocity > 0 then
            task.wait(reactionTime)
            parryRemote:FireServer()
        end
    end
end)
